<div class="list-group no-m-bottom">
    {% for discussion in discussions %}
        <a class="advert-anchor" href="{{ path('demofony2_front_participation_discussions_edit', {id: discussion.id, discussion: discussion.titleSlug}) }}">
            <div class="list-group-item">
                <h3 class="list-group-item-heading">{{ discussion.title }} <small class="pull-right">{{ discussion.createdAt | localizeddate('medium', 'none') }}</small></h3>
                {% if discussion.state is not constant('CLOSED', discussion) %}
                    <h4><span class="label label-blue">{{ discussion.stateName | trans }}</span></h4>
                {% endif %}
                {% set description = discussion.description | striptags %}
                {% autoescape false %}
                    <p class="list-group-item-text">{{ description | length > 200 ?  description[:200] ~ '...' : description }}</p>
                {% endautoescape %}
                <ul class="list-inline">
                    {% if discussion.documents | length > 0 %}
                        <li><span class="icon-cloud_download"></span> {{ discussion.documents | length }}</li>
                    {% endif %}
                    {% if discussion.gallery | length > 0 %}
                        <li><span class="icon-photo_camera"></span> {{ discussion.gallery | length }}</li>
                    {% endif %}
                    {% if discussion.commentsNotModeratedCount %}
                        <li><span class="icon-comment_outline"></span> {{ discussion.commentsNotModeratedCount  }}</li>
                    {% endif %}
                </ul>
            </div>
        </a>
    {% else %}
        <div class="list-group-item">
            <div class="alert alert-warning no-m-bottom" role="alert">
                <p class="list-group-item-text"><span class="icon-warning"></span> {{ 'front.participation.discussions.noitems' | trans }}</p>
            </div>
        </div>
    {% endfor %}
</div>
