"use strict";angular.module("dashboardApp",["chart.js","daterangepicker"]).config(["$interpolateProvider",function(t){t.startSymbol("[["),t.endSymbol("]]")}]),angular.module("dashboardApp").controller("MainCtrl",["$scope","$timeout","$log","$http",function(t,a,e,o){t.init=function(){e.log("[init] pages"),t.date={startDate:null,endDate:null},t.opts={format:"DD-MM-YYYY",timePicker:!1};var a=moment(),o=moment(a).subtract(7,"day").format("DD-MM-YYYY"),n=moment(a).format("DD-MM-YYYY");moment.locale("ca"),t.drawVisitsChart(o,n)},t.test=function(){console.log("entra"),console.log(t.date.startDate);var a=moment(t.date.startDate).format("DD-MM-YYYY");console.log(a)},t.drawVisitsChart=function(a,e){moment(a,"DD-MM-YYYY"),moment(e,"DD-MM-YYYY");o.get(Routing.generate("api_get_visits",{startAt:a,endAt:e})).success(function(a){"day"==a.type&&t.drawVisitsChartByDay(a.data)})},t.drawVisitsChartByDay=function(a){t.labels=[],t.series=[],t.data=[],angular.forEach(a,function(a){var e=moment(a.date,"YYYYMMDD").format("dddd DD MMMM");t.data.push(a.value),t.labels.push(e)}),console.log(t.data),t.series=["Visites"],t.data=[t.data],console.log(t.data)}}]);